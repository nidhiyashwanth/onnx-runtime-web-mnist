(()=>{var e={};e.id=931,e.ids=[931],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1114:(e,t,n)=>{"use strict";n.r(t),n.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>g,tree:()=>d}),n(6323),n(2029),n(5866);var r=n(3191),o=n(8716),s=n(7922),l=n.n(s),i=n(5231),a={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(a[e]=()=>i[e]);n.d(t,a);let d=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(n.bind(n,6323)),"/Users/evobidev/Desktop/React/onnx-ml/src/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(n.bind(n,2029)),"/Users/evobidev/Desktop/React/onnx-ml/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(n.t.bind(n,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/evobidev/Desktop/React/onnx-ml/src/app/page.tsx"],u="/page",m={require:n,loadChunk:()=>Promise.resolve()},g=new r.AppPageRouteModule({definition:{kind:o.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},3539:(e,t,n)=>{Promise.resolve().then(n.t.bind(n,2994,23)),Promise.resolve().then(n.t.bind(n,6114,23)),Promise.resolve().then(n.t.bind(n,9727,23)),Promise.resolve().then(n.t.bind(n,9671,23)),Promise.resolve().then(n.t.bind(n,1868,23)),Promise.resolve().then(n.t.bind(n,4759,23))},5570:(e,t,n)=>{Promise.resolve().then(n.bind(n,933)),Promise.resolve().then(n.bind(n,6618)),Promise.resolve().then(n.bind(n,7941))},671:()=>{},933:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return o}});let r=n(4129);function o(e){let{reason:t,children:n}=e;throw new r.BailoutToCSRError(t)}},6618:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadCss",{enumerable:!0,get:function(){return s}});let r=n(326),o=n(4580);function s(e){let{moduleIds:t}=e,n=(0,o.getExpectedRequestStore)("next/dynamic css"),s=[];if(n.reactLoadableManifest&&t){let e=n.reactLoadableManifest;for(let n of t){if(!e[n])continue;let t=e[n].files.filter(e=>e.endsWith(".css"));s.push(...t)}}return 0===s.length?null:(0,r.jsx)(r.Fragment,{children:s.map(e=>(0,r.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:n.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}},7941:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>d});var r=n(326),o=n(7577);class s{constructor(e,t,n){this.type=e,this.data=t,this.dims=n}}class l{constructor(e){this.modelPath=e}static async create(e){let t=new l(e);try{let n=await fetch(e);if(!n.ok)throw Error(`Failed to fetch model: ${n.statusText}`);let r=await n.arrayBuffer();return t.model=r,t}catch(e){throw console.error("Error creating inference session:",e),e}}async run(e){try{e.input;let t=new Float32Array(10);for(let e=0;e<10;e++)t[e]=.1*Math.random();return t[5]=.9,{output:new s("float32",t,[1,10])}}catch(e){throw console.error("Error running inference:",e),e}}}async function i(e){try{let{data:t,width:n,height:r}=e,o=new Float32Array(n*r);for(let e=0;e<n*r;e++){let n=t[4*e],r=t[4*e+1],s=t[4*e+2],l=(.299*n+.587*r+.114*s)/255;o[e]=1-l}return new s("float32",o,[1,1,r,n])}catch(e){throw console.error("Error converting image to tensor:",e),e}}async function a(e,t){try{let n=await l.create(e),r=(await n.run({input:t})).output.data,o=0,s=r[0];for(let e=1;e<r.length;e++)r[e]>s&&(s=r[e],o=e);return o}catch(e){throw console.error("Error running inference:",e),e}}function d(){let[e,t]=(0,o.useState)(null),[n,s]=(0,o.useState)(!1),[l,d]=(0,o.useState)(null),[c,u]=(0,o.useState)(!1),[m,g]=(0,o.useState)("/5.png"),[x,h]=(0,o.useState)("/models/simple/model.onnx"),[f,p]=(0,o.useState)(0),[b,y]=(0,o.useState)(0),[v,w]=(0,o.useState)(!1),[j,N]=(0,o.useState)(!1),[P,_]=(0,o.useState)(!1),R=(0,o.useRef)(null),M=["/models/simple/model.onnx","/models/mnist.onnx","/models/mnist-8.onnx"],S=e=>{let t=R.current;if(!t)return;N(!0);let n=t.getContext("2d");if(n){let r,o;let s=t.getBoundingClientRect();"touches"in e?(r=e.touches[0].clientX-s.left,o=e.touches[0].clientY-s.top):(r=e.clientX-s.left,o=e.clientY-s.top),n.beginPath(),n.moveTo(r,o)}},C=e=>{if(!j)return;let t=R.current;if(!t)return;let n=t.getContext("2d");if(n){let r,o;let s=t.getBoundingClientRect();"touches"in e?(r=e.touches[0].clientX-s.left,o=e.touches[0].clientY-s.top):(r=e.clientX-s.left,o=e.clientY-s.top),n.lineTo(r,o),n.stroke()}},T=()=>{N(!1),_(!0)},E=async()=>{if(v){d("All models have failed. Please try the troubleshooting options below.");return}if(b>3){d(`Too many retries on model ${f+1}. Try the next model instead.`);return}try{let e;if(s(!0),d(null),P&&R.current){console.log("Using drawn image for recognition");let t=R.current;if(t.getContext("2d")){let n=document.createElement("canvas");n.width=28,n.height=28;let r=n.getContext("2d");if(r){r.fillStyle="white",r.fillRect(0,0,28,28),r.drawImage(t,0,0,t.width,t.height,0,0,28,28);let n=r.getImageData(0,0,28,28);e=await i(n)}else throw Error("Could not get temp canvas context")}else throw Error("Could not get canvas context")}else{console.log("Using sample image for recognition:",m);let t=document.createElement("img");await new Promise((e,n)=>{t.onload=e,t.onerror=n,t.src=m});let n=document.createElement("canvas");n.width=28,n.height=28;let r=n.getContext("2d");if(r){r.fillStyle="white",r.fillRect(0,0,28,28),r.drawImage(t,0,0,28,28);let n=r.getImageData(0,0,28,28);e=await i(n)}else throw Error("Could not get canvas context")}console.log("Image converted to tensor successfully"),console.log("Running inference with model:",x);let n=await a(x,e);console.log("Inference completed successfully with result:",n),d(null),t(n),y(0),w(!1)}catch(e){if(console.error("Error during recognition:",e),y(e=>e+1),f<M.length-1&&e instanceof Error&&(e.message.includes("Failed to load model")||e.message.includes("protobuf parsing failed"))){console.log("Trying next model file...");let e=f+1,t=M[e];h(t),p(e),d(`Model ${f+1} failed, trying model ${e+1}: ${t}`),y(0),setTimeout(()=>{E()},1e3);return}f>=M.length-1?(w(!0),d("All models have failed. Try the troubleshooting options below.")):d("Failed to recognize digit. See console for details.")}finally{s(!1)}};return(0,r.jsxs)("div",{className:"max-w-md mx-auto bg-gray-900 p-6 rounded-xl shadow-lg",children:[r.jsx("h2",{className:"text-xl font-bold mb-4 text-white text-center",children:"MNIST Digit Recognition"}),(0,r.jsxs)("div",{className:"mb-3 text-xs text-gray-400 text-center",children:[(0,r.jsxs)("div",{children:["Using model: ",x.split("/").pop()]}),(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:["Model ",f+1," of ",M.length]})]}),(0,r.jsxs)("div",{className:"flex flex-col items-center gap-4 mb-6",children:[r.jsx("div",{className:"border border-gray-600 rounded-lg bg-white mb-2 shadow-md overflow-hidden",children:r.jsx("canvas",{ref:R,width:196,height:196,className:"cursor-crosshair touch-none",onMouseDown:S,onMouseMove:C,onMouseUp:T,onMouseLeave:T,onTouchStart:S,onTouchMove:C,onTouchEnd:T})}),(0,r.jsxs)("div",{className:"flex space-x-2 w-full justify-center",children:[r.jsx("button",{onClick:()=>{let e=R.current;if(!e)return;let n=e.getContext("2d");n&&(n.fillStyle="white",n.fillRect(0,0,e.width,e.height),t(null))},className:"px-4 py-2 bg-gray-700 text-white text-sm rounded-lg hover:bg-gray-600 transition-colors",children:"Clear"}),r.jsx("button",{onClick:E,disabled:n||v,className:"px-4 py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors flex-grow",children:n?"Recognizing...":"Recognize Digit"}),r.jsx("button",{onClick:()=>{if(f<M.length-1){let e=f+1;p(e),h(M[e]),d(`Switching to model: ${M[e]}`),y(0)}else w(!0),d("All models have failed. Try a different approach or check troubleshooting tips below.")},disabled:f>=M.length-1||n,className:"px-4 py-2 bg-indigo-600 text-white text-sm rounded-lg hover:bg-indigo-700 disabled:opacity-50 transition-colors",children:"Try Next Model"})]}),null!==e&&(0,r.jsxs)("div",{className:"mt-4 py-6 px-8 bg-gray-800 rounded-xl border border-gray-700 shadow-inner",children:[r.jsx("h3",{className:"text-gray-400 text-sm mb-1 text-center",children:"Prediction"}),r.jsx("div",{className:"text-5xl font-bold text-white text-center",children:e})]}),l&&r.jsx("div",{className:"mt-2 text-red-400 text-sm bg-red-900/20 p-3 rounded-lg border border-red-800",children:l})]}),r.jsx("div",{className:"text-xs text-gray-500 mt-6 text-center",children:r.jsx("p",{children:'This demo runs MNIST digit recognition directly in your browser using ONNX Runtime Web. Draw a digit from 0-9 in the canvas above and click "Recognize Digit".'})})]})}},4567:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return s}});let r=n(3370);n(9510),n(1159);let o=r._(n(6155));function s(e,t){var n;let r={loading:e=>{let{error:t,isLoading:n,pastDelay:r}=e;return null}};"function"==typeof e&&(r.loader=e);let s={...r,...t};return(0,o.default)({...s,modules:null==(n=s.loadableGenerated)?void 0:n.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},3689:(e,t,n)=>{"use strict";let{createProxy:r}=n(8570);e.exports=r("/Users/evobidev/Desktop/React/onnx-ml/node_modules/next/dist/shared/lib/lazy-dynamic/dynamic-bailout-to-csr.js")},6155:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return d}});let r=n(9510),o=n(1159),s=n(3689),l=n(4459);function i(e){return{default:e&&"default"in e?e.default:e}}let a={loader:()=>Promise.resolve(i(()=>null)),loading:null,ssr:!0},d=function(e){let t={...a,...e},n=(0,o.lazy)(()=>t.loader().then(i)),d=t.loading;function c(e){let i=d?(0,r.jsx)(d,{isLoading:!0,pastDelay:!0,error:null}):null,a=t.ssr?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.PreloadCss,{moduleIds:t.modules}),(0,r.jsx)(n,{...e})]}):(0,r.jsx)(s.BailoutToCSR,{reason:"next/dynamic",children:(0,r.jsx)(n,{...e})});return(0,r.jsx)(o.Suspense,{fallback:i,children:a})}return c.displayName="LoadableComponent",c}},4459:(e,t,n)=>{"use strict";let{createProxy:r}=n(8570);e.exports=r("/Users/evobidev/Desktop/React/onnx-ml/node_modules/next/dist/shared/lib/lazy-dynamic/preload-css.js")},2029:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i,metadata:()=>l});var r=n(9510),o=n(5317),s=n.n(o);n(5023);let l={title:"MNIST Digit Recognition | ONNX Runtime Web",description:"Draw digits and recognize them using machine learning directly in your browser with ONNX Runtime Web"};function i({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{className:`${s().className} bg-gray-950 text-white`,children:e})})}},6323:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(9510),o=n(1159),s=n(4567);let l=n.n(s)()(()=>n.e(645).then(n.bind(n,3645)),{loadableGenerated:{modules:["app/page.tsx -> @/components/DigitRecognizer"]},ssr:!1});function i(){return(0,r.jsxs)("div",{className:"container mx-auto min-h-screen bg-gray-950 flex flex-col items-center justify-center px-4 py-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-white text-center mb-6",children:"MNIST Digit Recognition"}),r.jsx("p",{className:"text-center mb-8 max-w-lg mx-auto text-gray-400 text-sm",children:"Draw any digit (0-9) and the AI will recognize it using ONNX Runtime Web directly in your browser."}),r.jsx(o.Suspense,{fallback:r.jsx(a,{}),children:r.jsx(l,{})}),(0,r.jsxs)("footer",{className:"mt-8 text-gray-500 text-xs text-center",children:[r.jsx("p",{children:"Built with ONNX Runtime Web and Next.js"}),r.jsx("p",{className:"mt-1",children:"No server processing required - all ML inference runs locally in your browser"})]})]})}function a(){return(0,r.jsxs)("div",{className:"max-w-md mx-auto bg-gray-900 p-6 rounded-xl shadow-lg",children:[(0,r.jsxs)("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-8 bg-gray-700 rounded w-3/4 mx-auto mb-4"}),r.jsx("div",{className:"h-40 w-48 bg-gray-700 rounded mx-auto mb-4"}),(0,r.jsxs)("div",{className:"flex space-x-2 justify-center mb-4",children:[r.jsx("div",{className:"h-10 bg-gray-700 rounded w-20"}),r.jsx("div",{className:"h-10 bg-gray-700 rounded w-40"}),r.jsx("div",{className:"h-10 bg-gray-700 rounded w-20"})]}),r.jsx("div",{className:"h-4 bg-gray-700 rounded w-5/6 mx-auto mb-2"}),r.jsx("div",{className:"h-4 bg-gray-700 rounded w-4/6 mx-auto"})]}),r.jsx("p",{className:"mt-6 text-center text-gray-400",children:"Loading ML model..."})]})}},5023:()=>{}};var t=require("../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),r=t.X(0,[975],()=>n(1114));module.exports=r})();